var J=Object.defineProperty,X=Object.defineProperties;var ee=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var B=(n,r,t)=>r in n?J(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,u=(n,r)=>{for(var t in r||(r={}))re.call(r,t)&&B(n,t,r[t]);if($)for(var t of $(r))te.call(r,t)&&B(n,t,r[t]);return n},k=(n,r)=>X(n,ee(r));import{a as e,F as h,j as l,s as H,r as z,ai as m,aj as p}from"./index.f52781a9.js";import{t as ne,D as ae}from"./Dashboard.fd18947c.js";import{C as ie}from"./Toast.0ae85c90.js";import{C as se,F as oe}from"./Card.ee8d3258.js";import{R as le,G as ce}from"./Rocket.5ccd8086.js";import{G as de,a as ue}from"./GetByName.cc5377d5.js";import{u as G,c as me,s as pe}from"./store.e96f2609.js";import{u as K,a as O,S as P}from"./SubmitButton.96350b2a.js";import{u as T,S as W}from"./StatusHandler.ec046620.js";import{a as he,i as d,b as fe}from"./constants.f2e04d14.js";import{T as w}from"./chakra-ui-tooltip.esm.eb698682.js";import{E as S,I as y}from"./ErrorWarning.4750ca61.js";import{S as be}from"./chakra-ui-select.esm.a9f625b2.js";import{S as s}from"./StyledLabel.4d380b9c.js";import{b as ge,E as V,S as Se,a as ye}from"./SearchPlus.35f7143c.js";import{G as xe}from"./GetByParams.1736c43d.js";import{C as qe}from"./CodeBranch.e409172e.js";import"./chakra-ui-button.esm.19477a37.js";import"./chakra-ui-checkbox.esm.77685af8.js";const Ie="http://localhost:4000",E=he.create({baseURL:Ie,withCredentials:!1});E.defaults.headers.common["Content-Type"]="application/json";const Q={size:"sm",type:"file",variant:"flushed"};async function we(n,r){try{const t=await E.post(n,r),{data:o}=t;return o}catch(t){return t==null?void 0:t.message}}async function Ce(n,r,t){try{return(await E.put(`/${r}/${t}`,n)).data}catch(o){return o.message}}async function _(n){try{return(await E.get(n)).data}catch(r){return r.message}}function N({message:n,children:r}){return e(h,{children:e(w,{label:n,hasArrow:!0,arrowSize:15,children:r})})}function L(n){const{list:r,register:t,label:o,required:a,info:i,errors:C}=n;return l(h,{children:[e(be,k(u({},t(o,{required:a})),{placeholder:"Seleccione opci\xF3n",size:"xm",color:"#000000",children:r&&r.map((c,f)=>e("option",{value:c.id,children:c.email&&c.email||c.name&&c.name},f))})),e(S,{label:o,errors:C,info:i})]})}const D=({label:n,register:r,required:t,errors:o,defaultValue:a,info:i})=>l(h,{children:[e(w,{label:i,hasArrow:!0,arrowSize:15,children:e(y,u({size:"sm",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^\d+$/,required:t,maxLength:3,minLength:3})))}),e(S,{label:n,errors:o,info:i})]}),I=({label:n,register:r,required:t,errors:o,defaultValue:a,info:i})=>l(h,{children:[e(w,{label:i,hasArrow:!0,arrowSize:15,children:e(y,u({size:"sm",type:"text",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^[a-zA-Z\u00C0-\u017F\s]+$/,required:t})))}),e(S,{label:n,errors:o,info:i})]}),Y=({label:n,register:r,required:t,errors:o,defaultValue:a,info:i})=>l(h,{children:[e(w,{label:i,hasArrow:!0,arrowSize:15,children:e(y,u({size:"sm",type:"tel",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{required:t,pattern:/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{2,6}$/im})))}),e(S,{label:n,errors:o,info:i})]});let q=new Date().getFullYear();const ve=new Date().getMonth()+1;q=parseInt(q.toString().substring(2,4));const Z=({register:n,errors:r,defaultValue:t,info:o})=>l(h,{children:[e(w,{label:"campo requerido de 11 d\xEDgitos",hasArrow:!0,arrowSize:15,children:e(y,u({size:"sm",type:"number",cursor:"pointer",variant:"flushed",defaultValue:t},n("ci",{required:!0,validate:{isOlder:a=>q-parseInt(a.substring(0,2))==18&&ve>parseInt(a.substring(2,4))||q>parseInt(a.substring(0,2))&&q-parseInt(a.substring(0,2))>18||q<parseInt(a.substring(0,2))&&parseInt(a.substring(0,2))<99,min_month:a=>parseInt(a.substring(2,4))>=1,max_month:a=>parseInt(a.substring(2,4))<=12,min_day:a=>parseInt(a.substring(4,6))>=1,max_day:a=>parseInt(a.substring(4,6))<=31},minLength:11,maxLength:11})))}),e(S,{label:"ci",errors:r,info:o})]});function Fe(){var R;const n=G(me),{stack:r}=n,t=G(pe),[o,a]=z.exports.useState(""),{register:i,handleSubmit:C,formState:{errors:c}}=K(),f="/users/enabled/true",v="/empresas-instituciones/",x="representantes",{data:F}=T("users-enabled",()=>_(f)),{data:b}=T("companies",()=>_(v)),g=O(j=>Ce(j,x,r.id)),A=(R=g==null?void 0:g.data)==null?void 0:R.message;return z.exports.useEffect(()=>{A&&a(A),A==="updated"&&t.setOption("mostrar")},[A]),e(h,{children:e(Ae,{children:l("form",{onSubmit:C(async j=>{g.mutateAsync(j)}),children:[e(s,{color:"#000000",center:!0,m:"0 0 1.5em 0",children:"Modificar representante:"}),e(s,{children:"Seleccione empresa o instituci\xF3n"}),e(L,{info:"Selecci\xF3n requerida!",list:b==null?void 0:b.result,label:"eiId",register:i,required:!0,errors:c}),e(s,{children:"Nro de Carnet del representante"}),e(Z,{required:!0,info:d.ci,errors:c,register:i,defaultValue:r.ci}),e(s,{children:"Tomo del representante"}),e(D,{info:d.tome,required:!0,label:"tome",errors:c,register:i,defaultValue:r.tome}),e(s,{children:"Folio del representante"}),e(D,{info:d.folio,required:!0,label:"folio",register:i,errors:c,defaultValue:r.folio}),e(s,{children:"Nombre y apellidos de representante"}),e(I,{info:d.name,label:"name",register:i,errors:c,required:!0,defaultValue:r.name}),e(s,{children:"Tel\xE9fono del representante"}),e(Y,{info:d.tel,label:"phone",register:i,errors:c,required:!0,defaultValue:r.phone}),e(s,{children:"Nombre y apellidos de quien lo nombra"}),e(I,{info:d.name,label:"namer",register:i,errors:c,required:!0,defaultValue:r.namer}),e(s,{children:"Cargo del que lo nombra"}),e(I,{info:d.occupancy,label:"namerCharge",register:i,errors:c,required:!0,defaultValue:r.namerCharger}),e(s,{children:"Adjunte el documento del nombramiento"}),e(N,{message:d.file,children:e(y,u(u({list:"representantes"},i("nominationTemplate")),Q))}),c.nominationTemplate&&e("span",{style:{color:"red"},children:"Selecci\xF3n requerida"}),e(s,{children:"Seleccione usuario al que se vincula"}),e(L,{info:"Selecci\xF3n requerida!",list:F==null?void 0:F.result,label:"userId",register:i,required:!0,errors:c}),e(s,{children:"Deshabilitar o habilitar"}),e(ge,k(u({size:"sm",colorScheme:"red"},i("enabled")),{defaultChecked:Boolean(r.enabled)})),e(P,{buttonstate:g==null?void 0:g.isLoading}),o&&e(W,{message:o})]})})})}const Ae=H.div`
  padding: 1em;
  display: flex;
  flex-direction: column;
  @media (min-width: 600px) {
    min-width: 500px;
  }
`,M=({label:n,register:r,required:t,errors:o,defaultValue:a,info:i})=>l(h,{children:[e(w,{label:i,hasArrow:!0,arrowSize:15,children:e(y,u({size:"sm",type:"number",cursor:"pointer",variant:"flushed",defaultValue:a},r(n,{pattern:/^\d+$/,required:t,minLength:3,maxLength:3})))}),e(S,{label:n,errors:o,info:i})]});function ze(){const[n,r]=z.exports.useState(""),{register:t,handleSubmit:o,formState:{errors:a}}=K(),i="/users/enabled/true",C="/empresas-instituciones/",c="/representantes",{data:f}=T("users-enabled",()=>_(i)),{data:v}=T("companies",()=>_(C)),x=O(b=>we(c,b));return e(h,{children:l("form",{onSubmit:o(async b=>{x.mutateAsync(b)}),children:[e(s,{center:!0,color:"#222222",children:"Crear representante"}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Seleccione empresa o instituci\xF3n"}),e(L,{list:v==null?void 0:v.result,label:"eiId",register:t,required:!0,info:"Selecci\xF3n requerida",errors:a}),a.eiId&&e("span",{style:{color:"#c40550"},children:"campo requerido"})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Nro de Carnet del representante"}),e(Z,{register:t,errors:a,required:!0,info:d.ci})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Tomo del representante"}),e(M,{label:"tome",register:t,errors:a,required:!0,info:d.tome})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Folio del representante"}),e(M,{label:"folio",register:t,errors:a,required:!0,info:d.folio})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Nombre y apellidos de representante"}),e(N,{message:d.name,children:e(I,{label:"name",register:t,errors:a,required:!0,info:d.name})})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Tel\xE9fono del representante"}),e(Y,{label:"phone",register:t,errors:a,required:!0,info:d.tel})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Nombre y apellidos de quien lo nombra"}),e(I,{label:"namer",register:t,errors:a,required:!0,info:d.tutor})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Cargo del que lo nombra"}),e(I,{label:"namerCharge",register:t,errors:a,required:!0,info:d.occupancy})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Adjunte el documento del nombramiento"}),e(N,{message:d.file,children:e(y,u(u({list:"representantes"},t("nominationTemplate")),Q))}),e(S,{label:"nominationTemplate",errors:a})]})}),e(m,{p:"1em",children:l(p,{children:[e(s,{children:"Selecciona usuario al que se vincula"}),e(L,{list:f==null?void 0:f.result,label:"userId",register:t,required:!0,info:"Selecci\xF3n requerida",errors:a}),a.userId&&e("span",{style:{color:"#c40550"},children:"campo requerido"})]})}),e(P,{buttonstate:x==null?void 0:x.isLoading}),n&&e(W,{message:n})]})})}const U=[{option:"crear",icon:e(V,{}),comp:e(ze,{})},{option:"mostrar",icon:e(Se,{}),comp:e(de,{url:"representantes"})},{option:"buscar",icon:e(ye,{}),comp:e(ue,{allnames:"representantes"})},{option:"habilitados",icon:e(le,{}),comp:e(ce,{queryKey:"agent-enabled",url:"representantes/enabled/true"})},{option:"asociado",icon:e(qe,{}),comp:e(xe,{path:"representantes/empresa-institucion",attached:"empresas-instituciones",queryKey:"func-reg"})},{option:"modificar",icon:e(V,{}),comp:e(Fe,{})}];function Ze(){const n=localStorage.getItem("jwt");return z.exports.useEffect(()=>{n&&(fe.defaults.headers.common.jwt=n)},[]),e(h,{children:l(Te,{children:[e(ie,{linear:ne.green,color:"#ffffff"}),e(ae,{children:e(se,{name:"representante",options:U,children:e(oe,{options:U})})})]})})}const Te=H.div`
  width: 100%;
  position: relative;
  background-color: #ffffff;
  .province {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .province__divider {
    position: relative;
    width: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .bg-grey {
    background-color: #3a3839;
  }
  .btn-backwards {
    align-self: flex-start;
    display: flex;
    text-transform: uppercase;
    font-weight: bolder;
    color: #0660b1;
    margin: 1em;
    span {
      position: relative;
      top: 0.5rem;
      left: 1rem;
      color: #009fff;
    }
  }
  .btn-backwards__text {
    font-weight: bolder;
    position: relative;
    top: 8px;
    left: 5px;
  }
`;export{Ze as default};
